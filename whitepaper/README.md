## Enigma：去中心化的隐私计算平台
### 摘要
Enigma是一个点对点网络，允许互不信任的多个参与方共同对数据进行存储和计算，并能彻底地保证数据的隐私。Enigma的计算模型建立在安全多方计算之上，具体地，我们采用了高度优化的可验证秘密分享体系。在隐私存储方面，我们使用了改进版的分散哈希表来保护共享秘密的数据。一个外部的区块链被用作该存储计算网络的控制器，管理着数据的访问控制权限和数字身份，并充当一个防篡改的事件日志库。保证金和服务费可以激励系统的运作，确保隐私计算的正确性和公平性。类似于比特币，Enigma也不需要一个可信的第三方，系统能够根据激励系统自主地控制个人数据。这是用户第一次能够在密码学保护下共享他们的隐私数据。
### 1.动机
从人类的早期历史来看，中心化是发展的一个主要竞争优势。具有中心化治理的社会制度能够发展出更先进的技术，累计更多的资源并实现快速的人口增长[1]。随着社会的演变，中心化的负面影响逐渐显露了出来：腐败、不平等、维持现状和滥用权力。事实证明，一定程度的权力分离[2]是必要的。如今，人们试图在这两种模型之间找到平衡，在去中心化治理的核验和制衡下做到集中控制，从而最大化产出和效率。
互联网的原始诉求是彻底的去中心化和自由[3]。然而，在过去的十年中，互联网的惊人增长引发了更大的中心化。少数大公司拥有网络的重要关口，因此占据了大量互联网数据。这些组织缺乏透明度和控制，再次揭示了中心化的负面影响: 操纵[4]，监视[5]和频繁的数据泄露[6]。
比特币[9]和其他区块链系统[10]（例如，以太坊）给出了一个全新的未来。互联网应用程序现在可以构建在去中心化架构上，其中没有任何一方拥有绝对的权力。区块链的公共性质保证了应用运行时的透明度，并留下了无可辩驳的活动记录，这为诚实行为提供了强有力的激励。比特币这种货币是第一个这样的应用程序，为互联网开启了一个新的范式。
然而，区块链的公共验证性也限制了其潜在的使用场景。现代应用程序使用大量数据，并对这些数据进行全面分析。这个限制意味着只有受信代码可以在区块链上运行[7]。问题是，现代应用程序往往需要对隐私数据进行大量加工。当前的区块链设计根本无法管理隐私，而且也不适用于繁重的计算。区块链系统的公共性质意味着隐私数据在流经网络中的每个全节点时会完全暴露。
这种情况下有一个奇怪的矛盾。最敏感的隐私数据似乎只能在中心化、不透明的和不安全的模型中存储和处理。我们认为这种模式导致了我们不得不接受灾难性的数据泄漏以及系统性的隐私缺失。

### 2.Enigma
Enigma是一个去中心化的隐私计算平台。我们的目标是使开发人员能够在没有可信第三方的情况下构建“privacy by design” (即GDPR隐私始于设计原则)、端到端的去中心化应用。
Enigma是隐私安全的。通过使用安全多方计算（sMPC或MPC），数据查询被转化为分布式的计算，无需受信任的第三方。具体来说，数据先被切分成不同的单元，然后分别发送到不同节点上，所有节点联合计算函数而不会将各自拥有的单元信息泄露给其他节点。没有任何一方能获取数据的整体；相反，每一方持有的只是毫无意义的、看似随机的一部分。
Enigma是可扩展的。与公共区块链不同的是，Enigma网络中的计算和数据存储不会复制到每个全节点。只有一小部分节点会在不同的数据单元上执行计算。减少存储计算的冗余能让网络支持更多高要求的计算。
Enigma带来的关键价值在于: 无需访问原始数据本身，也能够联合数据单元进行函数计算。例如，一组人想在不泄漏自己工资信息的情况下计算他们的平均工资，就可以只提供他们的工资数据的访问权(具体地，授权许可特定函数在工资数据单元上进行安全计算)。通过MPC，每个参与者只能了解到各自在小组中的相对位置，而对其他成员的工资一无所知。在实践中，MPC可以安全地评估任何程序，同时保持输入的秘密。
今天，共享数据是一个不可逆转的过程；一旦发送，就无法收回或限制其使用方式。提供数据的访问权用以安全计算是可逆的和可控制的，因为除了数据所有者之外，没有其他人能够看到原始数据。这给当前数据分析方法带来了根本性的变化。

### 3.设计概述
Enigma旨在连接现有的区块链和一个用以隐私密集型计算的链下网络。区块链系统可以通过数字签名和可编程的权限来实施访问控制。
代码在区块链（公共验证部分）和链下网络（隐私密集型的计算部分）上执行。 Enigma的执行方式确保了隐私和正确性，而单独的公共区块链只能保证后者。链下正确执行的证明被存储在区块链中用以审计。我们提供了一种脚本语言，支持使用隐私合约来设计端到端的分布式应用。这是一种更强大的智能合约变体，可以处理隐私信息（即，它们的状态不是严格公开的）。
这种脚本语言也是图灵完备的，但这点不像它的可伸缩性那般重要。公共区块链中的代码执行是去中心化的，但不是分布式的，因为每个节点冗余地执行相同的代码并保持相同的公共状态。在Enigma中，计算任务被有效地分发到网络的特定子集节点上。同时，如图1所示，一个解释器自动地拆分了隐私合约的执行，从而改善了运行时间，同时保持隐私和可验证性。

链下网络解决了以下几个区块链技术无法处理的问题：
1.储存。区块链不是通用数据库。 Enigma有一个去中心化的链下分布式哈希表（或DHT ），可供区块链访问，并且该表只存储数据的引用(即，MPC划分后的数据单元)，而不存储数据本身。在存储和访问控制协议被写入区块链之前，隐私数据应该在客户端进行加密。 Enigma使用定制化的脚本语言为这些任务提供简单的API。
2.隐私计算。 Enigma的网络确保正确执行代码，同时不会将原始数据泄露给任何计算节点。这是取代目前中心化隐私解决方案和可信覆盖网络的关键。这些中心化方案通常否定区块链的优势，而Enigma将要重新定义这点。计算模型在第5章中详细描述。
3.密集处理。即使隐私不是一个问题，区块链也无法扩展到需要大量交易清算的场景。Enigma的链下网络则可以用于运行被广播到区块链上的大量计算。

### 4.链下存储
链下节点构建了一个分布式数据库。每个节点都具有加密数据及其单元的独特视图，因此保证计算过程的隐私性和容错性。该数据库还可以存储未加密的大型公共数据（例如，文件）并将它们的访问地址记录到区块链。图2示例了单个节点的数据库视图。

在网络层面，该分布式存储的设计基于改进的Kademlia DHT协议[11]，增加了持久性和安全的点对点信道(这方面使用广播信道和公钥加密进行模拟)。该协议有助于有效地分发数据单元。我们修改了原始Kademlia距离度量，着重考虑了节点存储数据时(根据服务情况)被优先选择的概率。


